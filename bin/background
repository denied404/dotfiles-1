#!/usr/bin/ruby

files = [
    "~/.Xresources",
    "~/.mcabber/mcabberrc",
]

commands = [
    "xrdb -merge ~/.Xresources.theme",
    "echo '/source ~/.mcabber/mcabberrc' > ~/.mcabber/mcabber.fifo",
]

background = ARGV[0]

if !background
    background = ENV["BACKGROUND"]
end

if !background
    puts "error: background cannot be empty"
    exit 1
end

files.each do|file|
    link = file + "." + background
    cmd = "ln -sf " + link + " " + file + ".theme"
    puts cmd
    system(cmd)
end

commands.each do|command|
    puts command
    system(command)
end

system("echo '" + background + "' > ~/background")
