#!/bin/bash

filename="$HOME/screenshots/$(date +%F-%T | tr : T).png"

if [ "$1" == "import" ]; then
    import -trim $filename
elif [ "$1" == "border" ]; then
    maim --nokeyboard -s $filename && notify-send "Screenshot with border ready"
    convert -bordercolor black -border 1x1 $filename{,.new}
    mv $filename{.new,}
elif [ "$1" == "delayed" ]; then
    maim --nokeyboard -d5.0 -s $filename && notify-send "Delayed screenshot ready"
elif [ "$1" == "select" ]; then
    slop --nokeyboard -b 3 -c 1.0,0.5,0.45,0.8
elif [ "$1" == "public" ]; then
    maim --nokeyboard -s $filename
    mv $filename ~/public/
    echo $(basename $filename) | xclip
    notify-send "Screenshot ready, path copied to clipboard"
else
    maim --nokeyboard -s $filename
fi

echo "screenshot ready"
echo "$filename"
echo "uploading"
url="$(echo $filename | xargs imgur 2>&1 | head -n1)"
echo "$url"
echo "$url" | xclip -selection clipboard
notify-send "Screenshot ready"
