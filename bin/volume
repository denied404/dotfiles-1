#!/bin/bash

exec 200>/tmp/volume.lock
flock 200

action="$1"

if [ -f ~/.android-volume ]; then
    adb_devices_stub_lines=2

    adb_lines_count=$(adb devices | wc -l)

    if [[ $adb_lines_count > $adb_devices_stub_lines ]]; then
        exec android-volume $@
    fi
fi

case $action in
    up)
        exec amixer -M set Master 2%+
    ;;

    down)
        exec amixer -M set Master 2%-
    ;;
esac
