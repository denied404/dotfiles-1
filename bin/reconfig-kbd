#!/bin/bash

# udevd doesn't know about env variables
HOME=${HOME:-/home/vxw}
PATH=${PATH:-/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin}
XAUTHORITY=${XAUTHORITY:-/home/vxw/.Xauthority}
DISPLAY=${DISPLAY:-:0.0}

export HOME PATH DISPLAY XAUTHORITY

KEYCODES="evdev+aliases(qwerty)+hjkl"
COMPAT="complete+hjkl"
SYMBOLS=(
    "pc"
    "us"
    "ru:2"

    "level3(lwin_switch)"
    "mod4-lvl3"

    "hjkl"
    "hjkl(caret)"
    "hjkl(rctrl-rshift)"
    "hjkl(fast-enter)"
    "hjkl(fast-escape)"


    "capslock(escape)"
    "altwin(swap_alt_win)"
    #"bksp-last-group"
    #"ralt-first-group"

    "hjkl(fast-numpad)"
    "level5(ralt_switch)"
    #"hjkl(rtrn_switch)"

    "ctrl-shift-caps"
)

SYMBOLS=$(IFS="+"; echo "${SYMBOLS[*]}")

setxkbmap \
    -keycodes $KEYCODES \
    -symbols $SYMBOLS \
    -compat $COMPAT \
    -print | xkbcomp - :0

xset r rate 110 100
xset -b
