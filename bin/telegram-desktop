#!/bin/bash

export QT_STYLE_OVERRIDE=""
export QT_QPA_PLATFORMTHEME=gtk3
export TDESKTOP_I_KNOW_ABOUT_GTK_INCOMPATIBILITY=1

xd_class="telegram-desktop"

:kuake() {
    kuake --focus --padding 15 --bottom --left --width 35 --height 55 --class "$xd_class"
}

if  [[ ! "$(xdotool search --classname "$xd_class")" ]]; then
    /usr/bin/telegram-desktop -scale 75 -externalupdater -noupdate &
    xdotool search --onlyvisible --sync --classname "$xd_class" windowfocus
    :kuake
else
    :kuake
fi
