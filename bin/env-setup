#!/bin/bash

exec 2>&1 >/dev/null

export PATH="$(ruby -e 'print Gem.user_dir')/bin:$HOME/bin/:$HOME/private/bin/:$HOME/go/bin/:$PATH"
export SHELL=/usr/bin/zsh
export TERMINAL=urxvt
export EDITOR=/usr/bin/vim
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

export PROFILE="$(cat $HOME/profile)"
export BACKGROUND="$(cat $HOME/background)"


xrandr \
    --output VGA-0 --mode 1920x1080 --pos 1920x0 --rotate normal \
    --output HDMI-0 --mode 1920x1080 --pos 0x0 --rotate normal &

reconfig-kbd &

if [[ "$PROFILE" == "home" ]]; then
    if [ -z `pidof charge` ]; then
        sudo charge &
    fi
fi

killall -9 keynav
keynav &

if [ -z `pidof redshift` ]; then
    redshift -c ~/.config/redshift.conf &
fi

xset dpms 0 0 0
xset s off
xset -b
xset +fp ~/.fonts
xset fp rehash

xrdb -load ~/.Xresources
background $BACKGROUND &

disown
