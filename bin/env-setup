#!/bin/bash

export PATH=$HOME/bin/:$HOME/go/bin/:$PATH
export SHELL=/usr/bin/zsh
export TERMINAL=urxvt
export EDITOR=/usr/bin/vim
export LANG=en_US.UTF-8
export LC_ALL=en_US.UTF-8

export PROFILE="$(cat $HOME/profile)"
export BACKGROUND="$(cat $HOME/background)"

xrandr \
    --output VGA-0  --mode 1920x1080 --pos 1920x0 \
    --output HDMI-0 --mode 1920x1080 --pos 0x0 &

reconfig-kbd &

if [[ "$PROFILE" == "home" ]]; then
    if [ -z `pidof charge` ]; then
        sudo charge &
    fi
fi

sudo killall -9 shift-shift
RAZER_KB=$(sudo shift-shift --list | grep Razer)
GFIRST="CAPSLOCK"
GSECOND="RIGHTSHIFT"
if [[ "$RAZER_KB" != "" ]]; then
    sudo shift-shift -quiet=true -match "razer" -first $GFIRST -second $GSECOND &
else
    sudo shift-shift -quiet=true -first $GFIRST -second $GSECOND &
fi

killall -9 keynav
keynav &

if [ -z `pidof redshift` ]; then
    redshift -c ~/.config/redshift.conf &
fi

xset dpms 0 0 0
xset s off
xset -b

xrdb -load ~/.Xresources
background $BACKGROUND &

disown
