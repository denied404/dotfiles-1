#!/bin/bash

if [ "$1" == "x" ]; then
    sed -i '/XXXXXX/d' *.go
    go fmt
    exit 0
fi

for file in `git ls-files`; do
    if test -f $file; then
        grep -q '.\{80\}' "$file"
        if [ $? -eq 0 ]; then
            echo "$file"
            cat $file | sed 's/\t/    /g' | grep --color '.\{80\}' -A 2 -B 2 -n
        fi

        grep -q 'XXXXXX' "$file"
        if [ $? -eq 0 ]; then
            echo "$file"
            grep --color 'XXXXXX' -A 2 -B 2 -n "$file"
        fi
    fi
done


echo
echo
echo

gometalinter -D golint --cyclo-over 15
